<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Box Alignment</title>
    <meta name="description" content="The web is made of boxes. But aligning them has not been the easiest task for web developers. Luckily, CSS has evolved to a point where we now have a suite of tools well-suited for aligning boxes along both the inline and block axes. This talk dives deep into the various alignment techniques across all the formatting contexts so you can figure out which method best fits your use-case.">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/jing.css">
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
    </script>
  </head>

  <body>
    <div class="reveal">
      <div class="slides">
        <section data-background-image="img/title.jpg">
          <h1 style="text-transform:uppercase">Box Alignment</h1>
          <aside class="notes">Hello everyone! Today's talk is all about boxes. So expect to hear the word ‘boxes’ quite a lot. If you don't like boxes… Why not? I mean, I think boxes are great.</aside>
        </section>

        <section data-background-image="img/emoji-bg.png" data-background-repeat="repeat" data-background-size="200px">
          <div class="l-double">
            <div style="display:flex;flex-direction:column;align-items:center">
              <img data-src="img/name.svg" alt="Chen Hui Jing" class="plain" style="max-height:25vh">
              <div>
                <img data-src="img/avatar.jpg" alt="Jing" style="border-radius:50%;max-height:50vh">
              </div>
              <a href="https://www.twitter.com/hj_chen">@hj_chen</a>
            </div>
            <div style="display:grid;grid-template-columns:repeat(3,3em);grid-template-rows:repeat(3,3em);width:100%;grid-template-areas:'a . b''. c .''d . e';font-size:150%">
              <span style="font-size:calc(1.75em + 3vw);grid-area:a" class="emoji" role="img" tabindex="0" aria-label="Malaysia">&#x1F1F2;&#x1F1FE;</span>
              <span style="font-size:calc(1.75em + 3vw);grid-area:b" class="emoji fragment" role="img" tabindex="0" aria-label="basketball">&#x1F3C0;</span>
              <span style="font-size:calc(1.75em + 3vw);grid-area:c" class="emoji fragment" role="img" tabindex="0" aria-label="woman technologist">&#x1F469;&#x200D;&#x1F4BB;</span>
              <span style="font-size:calc(1.75em + 3vw);grid-area:d" class="emoji fragment" role="img" tabindex="0" aria-label="memo">&#x1F4DD;</span>
              <span style="font-size:calc(1.75em + 3vw);grid-area:e" class="emoji fragment" role="img" tabindex="0" aria-label="fox">&#x1F98A;</span>
            </div>
          </div>
          <aside class="notes">Anyway, my name is Hui Jing. I'm from Malaysia, used to play basketball full-time, fell into working on the web because of it. I have a blog full of CSS posts (among other things) and am a Mozilla TechSpeaker, which is an initiative by Mozilla to support technical evangelists in regional communities around the world by providing resources and funding.</aside>
        </section>

        <section>
          <img class="plain" data-src="img/techspeakers.png" alt="Mozilla TechSpeakers">
          <p><a href="https://events.mozilla.org/techspeakers">https://events.mozilla.org/techspeakers</a></p>
          <aside class="notes">If this sounds like something you're interested, applications for the Winter cohort are now open.</aside>
        </section>

        <section>
          <img style="max-height:10em;margin-bottom:0.5em" class="plain" data-src="img/love-dev.svg" alt="Nexmo Developer Relations">
          <p><span class="emoji" role="img" tabindex="0" aria-label="avocado">&#x1F951;</span> Developer Advocate <span class="emoji" role="img" tabindex="0" aria-label="avocado">&#x1F951;</span></p>
          <img style="max-height:2.5em;margin-top:1em" class="plain" data-src="img/nexmo.svg" alt="Nexmo">
          <aside class="notes">
            <p>I'm currently a Developer Advocate at Nexmo, which is a completely new role for me. So we'll see how this pans out. Out of curiosity, has anybody heard of Nexmo?</p>
            <p>For those who haven't, Nexmo is a platform which makes it easier for developers to integrate communications into their applications by providing APIs for messaging, voice and authentication. If you'd like to find out more, feel free to have a chat with me. I also have stickers.</p>
          </aside>
        </section>

        <section data-background-image="img/program-boxes.jpg">
          <blockquote style="background-color:rgba(255,255,255,0.7)">“As CSS developers, we are programmers of boxes.”<br><small>—<a style="color:#1d877a" href="https://notlaura.com/">Lara Schenck</a></small></blockquote>
          <aside class="notes">I visited Berlin for the first time in my life earlier this year at CSSConf.EU. There, I met Lara Schenck, who said this in her talk: that CSS developers are programmers of boxes. I found that a really good description of what we do.</aside>
        </section>

        <section>
          <img data-src="img/box.svg" alt="A box" class="plain" style="height:3em">
          <aside class="notes">The visual web is made up of boxes.</aside>
        </section>

        <section>
          <img data-src="img/boxes.svg" alt="Multiple boxes" class="plain" style="height:5em">
          <aside class="notes">Many different types of boxes.</aside>
        </section>

        <section>
          <img data-src="img/nested-boxes.svg" alt="Nested boxes" class="plain" style="height:15em">
          <aside class="notes">Boxes nested within other boxes. And all these different boxes happen to behave differently. In order to make sense of how to arrange these boxes, or align them, we must first understand them.</aside>
        </section>

        <section>
          <h2>Where do boxes come from?</h2>
          <div class="fragment">
            <p class="bomb-txt">CSS</p>
            <p><small>Cool colour font, <a href="https://colorfontweek.fontself.com/#playbox">Playbox</a> by <a href="https://www.c8six.com/">Matt Lyon</a></small></p>
          </div>
          <aside class="notes">So where do these boxes come from anyway? Well, they are generated by CSS.</aside>
        </section>

        <section data-background-image="img/css-history.svg" data-background-size="95%">
          <aside class="notes">
            <p>CSS has come a long way since 1996, starting out as a simple style sheet mechanism allowing authors and readers to attach style to HTML documents.</p>
            <p>Today, CSS still does that, it is still a language that describes the rendering of HTML in various media, but the vocabulary of CSS is significantly larger.</p>
          </aside>
        </section>

        <section>
          <blockquote>“If we hadn’t developed CSS, we could have ended up with the web being a giant fax machine”<br><small>—<a href="https://medium.com/net-magazine/interview-with-h%C3%A5kon-wium-lie-f3328aeca8ed">Håkon Wium Lie</a></small></blockquote>
          <span style="font-size:calc(2.75em + 3vw)" class="emoji fragment" role="img" tabindex="0" aria-label="fax machine">&#x1F4E0;</span>
          <aside class="notes">
            <p>I'm around the same age as the web, so by the time I got around to using it, CSS had been around for a couple years. The first browser I ever used was Netscape Navigator 4. I remember a lot of tiled starry backgrounds, and blinking rainbow coloured text, those were big back then.</p>
            <p>But I am very glad CSS was invented, and has evolved to what it is today. And that the web did not end up being a giant fax machine.</p>
          </aside>
        </section>

        <section data-background-image="img/original-box.jpg">
          <aside class="notes">
            <p>Before we can talk about box alignment, we need to talk a little bit about the boxes themselves. Out of curiosity, I'd like to ask how many of you read CSS specifications?</p>
            <p>This is a screenshot of section 4 of the CSS1 recommendation published in 1996 and can I just say, I love the ASCII diagrams in that document. And that textured background? Classy.</p>
            <p>The box model has been around since the earliest days of CSS, grouping all rendered elements into 2 categories of boxes, block-level or inline.</p>
          </aside>
        </section>

        <section data-background-image="img/not-layout.jpg">
          <aside class="notes">Fun fact: upon further perusal of this document, I discovered that, at the time, CSS was not meant for doing layout, just a little something to think about.</aside>
        </section>

        <section data-background-image="img/visual-formatting-model.jpg">
          <aside class="notes">
            <p>CSS2 had expanded the formatting model, which is what we know now as the visual formatting model. This model determines how user agents process the document tree for visual media.</p>
            <p>And one particular sentence in the specification stood out to me. It reads: “In the visual formatting model, each element in the document tree generates zero or more boxes according to the box model”.</p>
          </aside>
        </section>

        <section>
          <p>Wait, what?</p>
          <span style="font-size:calc(2.75em + 3vw)" class="emoji" role="img" tabindex="0" aria-label="face with raised eyebrow">&#x1F928;</span>
          <aside class="notes">How do you generate zero boxes? That sentence out of context, seems somewhat bizarre. In order to make sense of it, I dug a bit into how browsers worked to render stuff.</aside>
        </section>

        <section data-backgrond-transition="none">
          <a href="https://www.w3.org/TR/CSS22/visuren.html"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <div style="display:grid;grid-template-columns:40% 60%;justify-content:center">
            <img data-src="img/source.svg" alt="Source document" class="plain" style="max-height:65vh;justify-self:center">
            <img data-src="img/box-tree.svg" alt="Box tree" class="plain fragment" style="max-height:75vh">
          </div>
          <aside class="notes">
            <p>Rendering engines parse the source document into objects the browsers can understand, but before it can actually render anything, an intermediary structure, called a box tree, is generated.</p>
            <p>This is a representation of the formatting structure of the document. CSS will assign a computed value for each CSS property to every element and text node in the source tree.</p>
          </aside>
        </section>

        <section data-backgrond-transition="none">
          <a href="https://www.w3.org/TR/CSS22/visuren.html"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <div style="display:grid;grid-template-columns:40% 60%;justify-content:center">
            <img data-src="img/source.svg" alt="Source document" class="plain" style="max-height:65vh;justify-self:center">
            <img data-src="img/box-tree-styles.svg" alt="Box tree" class="plain" style="max-height:75vh">
          </div>
          <aside class="notes">
            <p>One of those CSS properties is <code>display</code>, which tells the browser what type of box to generate. So usually, it's a one-element one-box situation, but some values can generate more than one box, like <code>list-item</code>, which generates a principal block box AND a marker box, for the bullet.</p>
            <p>When we apply the value of <code>none</code>, this causes the element not to generate any boxes at all. And that's why generating zero boxes makes sense. Cleared that up, now.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visuren.html"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <div style="display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:3fr 1fr 1fr 3fr;grid-template-areas:'a a b b''a a b b''c c d d''c c d d';grid-gap:1em;height:65vh">
            <h2 style="grid-row:2/4;grid-column:2/4">Layout of boxes</h2>
            <ul style="display:contents;list-style-type:'📦 ';list-style-position:inside">
              <li style="grid-area:a;text-align:center" class="fragment">Box dimensions and type</li>
              <li style="grid-area:b;justify-self:end;text-align:center" class="fragment">Positioning scheme <small>(normal flow / float / absolute positioning)</small></li>
              <li style="grid-area:c;align-self:end;text-align:center" class="fragment">Relationships between elements in the document tree</li>
              <li style="grid-area:d;align-self:end;justify-self:end;text-align:center" class="fragment">External information <small>(e.g. viewport size, intrinsic dimensions of images etc.)</small></li>
            </ul>
          </div>
          <aside class="notes">
            <p>After the browser generates the boxes, it'll have to lay them out, and the layout of these boxes are dependent on several factors:</p>
            <ul>
              <li>the box dimensions and type</li>
              <li>the positioning scheme used</li>
              <li>relationships between elements in the document tree</li>
              <li>external information like viewport size, intrinsic dimensions and so on</li>
            </ul>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visuren.html#positioning-scheme"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <h2>Positioning schemes</h2>
          <div class="l-multiple" style="align-items:center">
            <figure class="fragment" style="margin-right:1em">
              <img data-src="img/normal-flow.svg" alt="Normal flow" class="plain" style="height:2.5em">
              <figcaption>Normal flow</figcaption>
            </figure>
            <figure class="fragment" style="margin-right:1em">
              <img data-src="img/floats.svg" alt="Floats" class="plain" style="height:3em">
              <figcaption>Floats</figcaption>
            </figure>
            <figure class="fragment">
              <img data-src="img/flex-abs.svg" alt="Absolute positioning" class="plain" style="max-height:8em">
              <figcaption>Absolute positioning</figcaption>
            </figure>
          </div>
          <aside class="notes">
            <p>Positioning schemes. To be honest, until I read the spec, I didn't know this was a thing. But it's important because there's some terminology introduced here that pretty much sets up the remainder of the talk.</p>
            <p>There are 3 types of positioning schemes, normal flow, floats and absolute positioning.</p>
            <p>Boxes in a normal flow will belong to a formatting context. And right now, we have several of those. Relatively positioned boxes remain part of this normal flow.</p>
            <p>When we float a box, it is first laid out in the normal flow, then taken out of it and shifted as far left, or right, as possible.</p>
            <p>When a box is absolutely positioned, it's removed from the normal flow altogether, and given a position with respect to its containing box.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visuren.html#normal-flow"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <h2>What is a formatting context?</h2>
          <img data-src="img/formatting-context.svg" alt="Formatting context" class="plain" style="max-height:65vh">
          <aside class="notes">
            <p>A formatting context is the environment in which a set of related boxes are laid out. And different formatting contexts have different rules for how they lay out the boxes within them.</p>
            <p>Boxes can generate new formatting contexts, and create a new environment where the layout of its children is <em>mostly</em> not affected by the rules and contents of the environment outside itself.</p>
            <p>I say mostly, because certain formatting contexts can allow interaction between their contents. For example, line boxes within an inline formatting context can interact with floats belonging to the block formatting context containing them all.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-display-3/"><img data-src="img/spec-display.svg" alt="CSS Display Module Level 3" class="plain spec"></a>
          <h2>The <code>display</code> property</h2>
          <p>Defines an element's <strong>display type</strong>,which consists of the<br> two basic qualities of how an element generates boxes</p>
          <aside class="notes">
            <p>Our next very important property is <code>display</code>. The CSS Display Module Level 3 is meant to replace and extend the display property from CSS2. Some of the things I mention may not be implemented in browsers yet, but do paint a picture of future CSS to come.</p>
            <p>It used to be that a single-keyword syntax for <code>display</code> was enough, because we only had block boxes, inline boxes and table boxes. And they could pretty much exist in the world on their own.</p>
            <p>Flexbox was the first module to introduce the concept of a parent-child relationship between a box and its children. And Grid uses that model as well.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-display-3/"><img data-src="img/spec-display.svg" alt="CSS Display Module Level 3" class="plain spec"></a>
          <div class="l-double" style="grid-gap:1em">
            <div>
              <h2>Inner display type</h2>
              <div class="fragment">
                <p>Defines the generated formatting context for descendant boxes</p>
                <img data-src="img/inside-display.svg" alt="Inner display type" class="plain" style="max-height:35vh">
              </div>
            </div>
            <div>
              <h2>Outer display type</h2>
              <div class="fragment">
                <p>Dictates a principal box's own participation in flow layout</p>
                <img data-src="img/outside-display.svg" alt="Outer display type" class="plain" style="max-height:45vh">
              </div>
            </div>
          </div>
          <aside class="notes">
            <p>In Display Level 3, the single-keyword syntax is still very much valid, but each of these values have a longer “full” version, that indicates how the box itself behaves, and how its children behave.</p>
            <p>We have the inner display type, which determines the kind of formatting context the box generates, and this affects the child boxes within it.</p>
            <p>And we have the outer display type, which dictates how the box itself participates in flow layout.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-display-3/"><img data-src="img/spec-display.svg" alt="CSS Display Module Level 3" class="plain spec"></a>
          <table style="font-size:75%">
            <thead>
              <tr style="border-bottom:3px solid black">
                  <th width="20%">Short <code>display</code><br></th>
                  <th width="30%">Full <code>display</code></th>
                  <th>Generated box</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                  <td>none</td>
                  <td>—</td>
                  <td>subtree omitted from box tree</td>
              </tr>
              <tr>
                  <td>contents</td>
                  <td>—</td>
                  <td>element replaced by content in box tree</td>
              </tr>
              <tr>
                  <td>ruby</td>
                  <td>inline ruby</td>
                  <td>inline-level ruby container</td>
              </tr>
              <tr>
                  <td>block ruby</td>
                  <td>block ruby</td>
                  <td>block box containing ruby container</td>
              </tr>
              <tr>
                  <td>table</td>
                  <td>block table</td>
                  <td>block-level table wrapper box containing table box</td>
              </tr>
              <tr>
                  <td>inline-table</td>
                  <td>inline table</td>
                  <td>inline-level table wrapper box containing table box</td>
              </tr>
              <tr>
                  <td>list-item</td>
                  <td>block flow list-item</td>
                  <td>block box with additional marker box</td>
              </tr>
              <tr>
                  <td>inline list-item</td>
                  <td>inline flow list-item</td>
                  <td>inline box with additional marker box</td>
              </tr>
              <tr>
                  <td>run-in</td>
                  <td>run-in flow</td>
                  <td>run-in box (inline box with special box-tree-munging rules) </td>
              </tr>
            </tbody>
          </table>
          <aside class="notes">This table is directly lifted from the specification, and fills up 2 slides. If you pay attention to the ‘full’ column, notice that the outer display property is either <code>block</code> or <code>inline</code>. I'm glossing over <code>run-in</code> for now because its implementation status has been iffy for a long time.</aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-display-3/"><img data-src="img/spec-display.svg" alt="CSS Display Module Level 3" class="plain spec"></a>
          <table style="font-size:75%">
            <thead>
              <tr style="border-bottom:3px solid black">
                  <th width="20%">Short <code>display</code><br></th>
                  <th width="30%">Full <code>display</code></th>
                  <th>Generated box</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                  <td>flex</td>
                  <td>block flex</td>
                  <td>block-level flex container</td>
              </tr>
              <tr>
                  <td>inline-flex</td>
                  <td>inline flex</td>
                  <td>inline-level flex container</td>
              </tr>
              <tr>
                  <td>grid</td>
                  <td>block grid</td>
                  <td>block-level grid container</td>
              </tr>
              <tr>
                  <td>inline-grid</td>
                  <td>inline grid</td>
                  <td>inline-level grid container</td>
              </tr>
              <tr>
                  <td>block</td>
                  <td>block flow</td>
                  <td>block-level block container</td>
              </tr>
              <tr>
                  <td><strong>flow-root</strong></td>
                  <td>block <strong>flow-root</strong></td>
                  <td>block-level block container that establishes a new block formatting context (BFC)</td>
              </tr>
              <tr>
                  <td>inline</td>
                  <td>inline flow</td>
                  <td>inline box</td>
              </tr>
              <tr>
                  <td>inline-block</td>
                  <td>inline <strong>flow-root</strong></td>
                  <td>inline-level block container</td>
              </tr>
            </tbody>
          </table>
          <aside class="notes">
            <p>There's a part of the specification that is relevant for browser vendors, probably not so much for web developers, that explain how certain layout effects require the blockification or inlinification of box types to ensure a box is matched to its context. Don't you love invented words?</p>
            <p>As far as I know, the multi-value syntax is not supported in any browser, I've only managed to find an entry for it on Firefox's bug tracker, and none from the other browsers but if someone here can verify this for me, I'd appreciate it greatly.</p>
            <p>Out of this long list of values though, only <code>flow-root</code> is a brand-new value. When a box has its <code>display</code> set to <code>flow-root</code>, it generates a block-level block container that establishes a new block formatting context.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visuren.html#block-formatting"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <h2>Block formatting context</h2>
          <p>The context that <strong>block-level</strong> boxes participate in</p>
          <div class="fragment">
            <p>Boxes are laid out one after another, in the block flow direction, from the start of the containing block</p>
            <img data-src="img/bfc.svg" alt="Block formatting context" class="plain" style="max-height:25vh">
          </div>
          <p class="fragment">Margins along the block flow direction between <strong>adjacent block-level</strong> boxes in the <strong>same</strong> block formatting context collapse</p>
          <aside class="notes">
            <p>A block formatting context, which I will abbreviate to BFC, is the context that block-level boxes participate in. Boxes are laid out one after another in the block-flow direction, which is determined by a box's writing mode.</p>
            <p>Margins along the block flow direction between boxes within the same BFC will collapse. This is otherwise known as the infamous collapsing margins phenomenon.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visuren.html#block-formatting"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <h2>Who establishes new block formatting contexts?</h2>
          <ul>
            <li class="fragment">Floats</li>
            <li class="fragment">Absolutely positioned elements</li>
            <li class="fragment">Block containers that are <strong>not</strong> block boxes</li>
            <li class="fragment">Block boxes with <code>overflow</code> <strong>other than</strong> <code>visible</code></li>
            <li class="fragment">Boxes with <code>display</code> set to <code>flow-root</code></li>
          </ul>
          <aside class="notes">
            <p>Earlier I mentioned that when a new formatting context is established, boxes within this new context are largely shielded from their outside environment. Which can come in pretty handy at times.</p>
            <p>There are a number of ways to establish new BFCs:</p>
            <ul>
              <li>You can float a box</li>
              <li>Or position it absolutely</li>
              <li>If you make the box an inline-block, a table-cell or table-caption, that can give you a new BFC</li>
              <li>Or you could set a block box's <code>overflow</code> value to anything but its initial value of <code>visible</code></li>
              <li>And the new way to do it, via <code>display: flow-root</code></li>
            </ul>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visuren.html#block-formatting"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <h2>We need a new BFC because...?</h2>
          <p>1. Prevent collapsing margins</p>
          <div class="livecode livecode-3p">
            <pre class="markup"><code class="html"><p>This is a line of text in a p tag.</p>
<div class="block-wrapper">
  <div class="box1">I'm a box with margins.</div>
  <div class="box2">I'm another box with margins.</div>
</div></code></pre>
            <div class="result collapse">
              <p style="margin-bottom:0.5em">This is a line of text in a p tag.</p>
              <div class="block-wrapper" style="background-color:pink">
                <div class="box1" style="background-color:salmon">I'm a box with margins.</div>
                <div class="box2" style="background-color:forestgreen;color:white">I'm another box with margins.</div>
              </div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.collapse .block-wrapper {
  
}

.collapse .box1 {
  margin: 0.5em;
}

.collapse .box2 {
  margin: 0.5em;
  
}</style></div>
          </div>
          <aside class="notes">
            <p>So what good is a new BFC? I'm glad you asked! Remember that I mentioned a new formatting context will generally contain the boxes within it? If collapsing margins isn't your thing, then this might help.</p>
            <p>Here, both the green and orange boxes have a margin of 0.5em set on them, but the top margin of the first box and the bottom margin of the second box has collapsed into their parent.</p>
            <p>Making the parent a new BFC will solve this problem. Any of the methods mentioned earlier will work, so let's try a commonly-used one, <code>overflow: hidden</code>.</p>
            <p>Right now, both the green and orange boxes are block boxes in the same BFC, but if I apply <code>display: inline-block</code> to the green box, the margins between them no longer collapse.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visuren.html#block-formatting"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <p>2. Stop text from flowing around the float</p>
          <div class="livecode livecode-3p">
            <pre class="markup"><code class="html"><div class="block-wrapper">
  <div class="box1">I'm a floated box!</div>
  <p class="box2">This is just a bunch of text that is going on and on so it's long enough to wrap around the float, line boxes yo!</p>
</div></code></pre>
            <div class="result stop-flow">
              <div class="block-wrapper" style="background-color:pink">
                <div class="box1" style="background-color:salmon">I'm a floated box!</div>
                <p class="box2" style="background-color:forestgreen;color:white">This is just a bunch of text that is going on and on so it's long enough to wrap around the float, line boxes yo!</p>
              </div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.stop-flow .box1 {
  float: left;
}

.stop-flow .box2 {
  
}</style></div>
          </div>
          <aside class="notes">
            <p>This is next example is exactly the situation I described earlier where contents within 2 different formatting contexts sort of end up “interacting”.</p>
            <p>To prevent the inline boxes from poking into the space below the floated box, we can make the <code>p</code> element wrapping the text a BFC. Let's try a <code>overflow: auto</code> here, and now the text will stay in its own lane. It's probably not the most semantic thing to do, but setting <code>display</code> to <code>table-cell</code> works too.</p>
            <p>We've essentially made the float and the text belong to separate formatting contexts so their contents are now contained within their own environment.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visuren.html#block-formatting"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <p>3. Contains floats</p>
          <div class="livecode livecode-3p">
            <pre class="markup"><code class="html"><div class="block-wrapper">
  <p class="box1">Floaty! ^_^</p>
  <p class="box2">Floaty too! :)</p>
</div></code></pre>
            <div class="result contain">
              <div class="block-wrapper" style="background-color:pink">
                <p class="box1" style="background-color:salmon">Floaty! ^_^</p>
                <p class="box2" style="background-color:forestgreen;color:white">Floaty too! :)</p>
              </div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.contain .block-wrapper {
  border: 3px solid indigo;
  
}

.contain .box1 {
  float: left;
}

.contain .box2 {
  float: left;
}</style></div>
          </div>
          <aside class="notes">
            <p>And lastly, this may be the most common use-case for establishing a BFC, as a technique for containing floats, or sometimes we may say clearing them.</p>
            <p>This situation happens when all the items within a container are floated, and the parent container ends up with no height. This is because floats are not in the normal flow, and no longer affect the height of the parent.</p>
            <p>Establishing a new BFC let's the parent contain the floats, so this time let's try <code>display: flow-root</code>, and now the parent box wraps its children nicely.</p>
            <p>Applying a float to the parent box, or setting it to <code>display: inline-block</code> also works, but the width of the parent will shrink to fit its children.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visuren.html#inline-formatting"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <h2>Inline formatting contexts</h2>
          <p>Established by a block container box that contains <strong>no block-level</strong> boxes</p>
          <div class="fragment">
            <p>Boxes are laid out one after another, in the inline direction, from the start of the containing block</p>
            <img data-src="img/ifc.svg" alt="Inline formatting context" class="plain" style="max-height:40vh">
          </div>
          <aside class="notes">
            <p>If block-level boxes do block formatting contexts, then naturally, inline-level boxes will participate in an inline formatting context, which I will also abbreviate to IFC.</p>
            <p>The rectangular area that contains the boxes which form a line is referred to as a line box. You can think of a paragraph as a stack of line boxes.</p>
            <p>Line boxes can be a bit tricky, because we can't directly see them from the source, they are generated based on how the content needs to be laid out.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visuren.html#inline-formatting"><img data-src="img/spec-vfm.svg" alt="CSS2.2 Visual formatting model" class="plain spec"></a>
          <h2>Inline box construction</h2>
          <div class="livecode livecode-3p">
            <pre class="markup" style="white-space:initial"><code class="html"><p class="line-container">If an element <em>generates zero boxes</em>, was it <strong>really there</strong> at all?</p></code></pre>
            <div class="result linebox">
              <p class="line-container"">If an element <em>generates zero boxes</em>, was it <strong>really there</strong> at all?</p>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.linebox p.line-container {
  font-size: 50%;
  margin: 1em;
}

.linebox .line-container em {
  
  
}

.linebox .line-container strong {
  
  
  
}</style></div>
          </div>
          <aside class="notes">
            <p>This is an example of a block box that contains 5 inline boxes, the block box in this case, being the <code>p</code> element. For now there is enough room so all 5 boxes fit into a single line box. But when there isn't enough room, inline boxes can be split across multiple line boxes.</p>
            <p>Splitting an inline box is like slicing a Snickers bar. The cut part won't have any chocolate coating on it, so margins, paddings and borders don't apply to the “split” part of the box.</p>
            <p>Only margins and padding along the inline axis have any visible effect on the inline box. I'll put some background colour on so you can see that even though padding is applied all around, the distance between the line boxes do not change.</p>
            <p>Though there could be some interesting things from a design perspective that might work here. Not sure, maybe throw in some blend-modes (screen).</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/text.html#propdef-text-align"><img data-src="img/spec-text.svg" alt="CSS2.2 Text" class="plain spec"></a>
          <h2>Alignment along the inline-axis</h2>
          <p>The <code>text-align</code> property aligns inline boxes along the inline-axis</p>
          <img data-src="img/horizontal-align.svg" alt="Horizontal alignment of line boxes" class="plain" style="max-height:40vh">
          <p>Applicable only when there is extra space available in the <strong>line box</strong></p>
          <aside class="notes">
            <p>Now that we're about halfway into the talk (I think), it's probably time to move onto the alignment part of things. Aligning boxes along the inline axis, is a reasonably straight-forward affair. We can use the <code>text-align</code> property, and its values of left, right, centre and justify.</p>
            <p>Just note that there has to be excess space within the line box for this to work. Also, <code>text-align</code> comes into play only after all the required line boxes have been generated and all the inline boxes have been laid out accordingly.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visudet.html#propdef-vertical-align"><img data-src="img/spec-vfmd.svg" alt="CSS2.2 Visual formatting model details" class="plain spec"></a>
          <h2>Alignment along the block-axis</h2>
          <div>
            <p>Boxes may be aligned along the block-axis in different ways, with the <code>vertical-align</code> property</p>
            <img data-src="img/vertical-align.svg" alt="Vertical alignment of line boxes" class="plain" style="max-height:25vh">
          </div>
          <aside class="notes">
            <p>A line box will always be tall enough to contain all the boxes within it. It can even be taller than the tallest box it contains. Shorter inline boxes can be aligned along the block-axis with the <code>vertical-align</code> property.</p>
            <p><code>vertical-align</code> is one of those properties that trips up people who are new to CSS, because it is only applicable to inline-level and table-cell elements.</p>
            <p>But, come on, there's no way you'd know that if you read it at face value, right? And it's key to remember that <code>vertical-align</code> controls the alignment of the inline boxes within the line box, <strong>not</strong> the alignment of the line boxes themselves.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/CSS22/visudet.html#propdef-vertical-align"><img data-src="img/spec-vfmd.svg" alt="CSS2.2 Visual formatting model details" class="plain spec"></a>
          <p>The height of the line box is based on its font, and its line-height</p>
          <img data-src="img/line-height.svg" alt="Line height of inline boxes" class="plain" style="max-height:35vh">
          <aside class="notes">
            <p>The <code>height</code> property does not apply to inline boxes. The height of an inline box is determined by their font, and their line-height. Here's where the spec gets a bit laissez faire about things because user agents are free to decide if they want to use the em box or the maximum ascender and descender of the font to calculate this value.</p>
            <p>You can use absolute length values, like ems or pixels, to set the height of an inline box. But we can also use unit-less numbers, which the browser will multiply by the element's font-size to get a computed value. If you use a percentage, it will also be multiplied by the element's font-size, not the height of the parent element, which is a more typical resolution for percentage values.</p>
          </aside>
        </section>

        <section>
          <h2>Explaining the inline-block centring technique</h2>
          <div class="livecode livecode-2p">
            <div class="result centring">
              <div class="wrapper">
                <p class="centred">I'm a block-level box that needs to be centred along the block-axis.</p>
              </div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.centring .wrapper {
  height: 100%;
}

.centring .wrapper::after {
  content: '';
  display: inline-block;
  height: 100%;
  vertical-align: middle;
  
  
}

.centring .centred {
  display: inline-block;
  vertical-align: middle;
  width: 60%;
  border: 2px dashed;
}</style></div>
          </div>
          <p><small><a href="https://css-tricks.com/centering-in-the-unknown/">Centering in the Unknown</a> by Chris Coyier</small></p>
          <aside class="notes">
            <p>So let's have an illustrative example. Before Flexbox became widely adopted, there were a number of techniques for centring things along the block-axis. </p>
            <p>One of them was this inline-block technique I first discovered from a CSS Tricks article by Chris Coyier, called Centring in the Unknown. It involves aligning the target block with a pseudo-element that is as tall at the parent container.</p>
            <p>An inline-block is an inline-level block box, also known as atomic inline because it participates in an IFC as a single opaque box.</p>
            <p>Setting both the pseudo-element and the child box to inline-block means they are both in an IFC. Because the pseudo-element is as tall as the wrapper, the <code>vertical-align</code> property can be used with the block of text.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-flexbox-1/"><img data-src="img/spec-flexbox.svg" alt="CSS Flexible Box Layout Module Level 1" class="plain spec"></a>
          <h2>Flex formatting context</h2>
          <p>Established by a block-level or inline-level <strong>flex</strong> container box</p>
          <div class="l-multiple" style="align-items:end">
            <img data-src="img/flex-mc.svg" alt="No margin collapse" class="fragment plain" style="max-height:25vh">
            <img data-src="img/flex-fc.svg" alt="No floats or clear" class="fragment plain" style="max-height:25vh">
            <img data-src="img/flex-va.svg" alt="No vertical-align" class="fragment plain" style="max-height:25vh">
            <img data-src="img/flex-abs.svg" alt="Absolute positioning still applies" class="fragment plain" style="max-height:40vh">
          </div>
          <aside class="notes">
            <p>And now, we move on to another formatting context, the flex formatting context. Different formatting context, different set of layout rules.</p>
            <p>Some highlights of the flex layout model include in the fact:</p>
            <ul>
              <li>the flex container's margins will not collapse with those of its children</li>
              <li><code>float</code> and <code>clear</code> do not apply to flex items</li>
              <li><code>vertical-align</code>, no effect on flex items either</li>
              <li>flex items can still be taken out of flow with absolute positioning</li>
              <li>flex items are flex-level boxes, not block-level boxes</li>
            </ul>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-flexbox-1/#flex-lines"><img data-src="img/spec-flexbox.svg" alt="CSS Flexible Box Layout Module Level 1" class="plain spec"></a>
          <h2>Flex axes</h2>
          <img data-src="img/flex-axis.svg" alt="Flex terminology" class="plain" style="max-height:55vh">
          <aside class="notes">
            <p>I've been using the terms block direction and inline direction for the entirety of the talk thus far. And now I'm going to introduce a new type of direction, called the flex direction.</p>
            <p>Think of the flex direction as the direction which flex items flow. Flex layout is fun because flex items can flow in any physical direction depending on the interplay between the <code>flex-flow</code>, <code>flex-wrap</code> and <code>writing-mode</code> values of the flex container.</p>
            <p>The main axis is the primary axis flex items are laid out, and the cross axis is always perpendicular to it.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-flexbox-1/#flex-lines"><img data-src="img/spec-flexbox.svg" alt="CSS Flexible Box Layout Module Level 1" class="plain spec"></a>
          <h2>Flex lines</h2>
          <div class="l-multiple" style="justify-items:center;align-items:center">
            <figure class="fragment">
              <img data-src="img/nowrap.svg" alt="Single flex line, nowrap" class="plain" style="height:2em">
              <figcaption><code>nowrap</code></figcaption>
            </figure>
            <figure class="fragment">
              <img data-src="img/wrap.svg" alt="Multiple flex lines, wrap" class="plain" style="height:8em">
              <figcaption><code>wrap</code></figcaption>
            </figure>
            <figure class="fragment">
              <img data-src="img/wrap-reverse.svg" alt="Multiple flex lines, wrap-reverse" class="plain" style="height:8em">
              <figcaption><code>wrap-reverse</code></figcaption>
            </figure>
          </div>
          <aside class="notes">
            <p>Flex items are laid out within flex lines. These containers are a little bit similar to line boxes, in that you can't see them in the source, but they are used for positioning and alignment of flex items. We can have single-line containers or multi-line containers based on the <code>flex-wrap</code> property.</p>
            <p>A single-line flex container will lay out all its children in one line, even if that means overflow, and this is the default flex container behaviour if you don't explicitly set a <code>flex-wrap</code> value.</p>
            <p>Setting it to <code>wrap</code> will cause flex items to break across multiple flex lines. Additional lines are stacked along the cross-axis, and the direction of this stacking is affected by the <code>flex-wrap</code> property.</p>
          </aside>
        </section>

        <section>
          <h2>Flex directions</h2>
          <div class="livecode livecode-2p">
            <div class="result directions">
              <div class="wrapper" style="font-size:60%">
                <div class="box">1一</div>
                <div class="box">2二</div>
                <div class="box">3三</div>
                <div class="box">4四</div>
                <div class="box">5五</div>
                <div class="box">6六</div>
                <div class="box">7七</div>
                <div class="box">8八</div>
                <div class="box">9九</div>
                <div class="box">10十</div>
                <div class="box">11十一</div>
                <div class="box">12十二</div>
                <div class="box">13十三</div>
                <div class="box">14十四</div>
                <div class="box">15十五</div>
                <div class="box">16十六</div>
                <div class="box">17十七</div>
                <div class="box">18十八</div>
                <div class="box">19十四</div>
                <div class="box">20二十</div>
              </div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.directions .wrapper {
  display: flex;
  flex-wrap: wrap;
  writing-mode: horizontal-tb;
  flex-direction: row;
  width: ;
  height: ;
}

.directions .box {
  height: 4em;
  width: 4em;
  border: 1px solid;
}</style></div>
          </div>
          <aside class="notes">
            <p>Combinations of the <code>writing-mode</code> property, the <code>flex-direction</code> and the <code>flex-wrap</code> property will determine how your flex items will flow.</p>
            <ul>
              <li><code>flex-direction</code> -> <code>row</code>, <code>row-reverse</code>, <code>column</code> and <code>column-reverse</code></li>
              <li><code>flex-wrap</code> -> <code>wrap-reverse</code>, then together with <code>row-reverse</code></li>
              <li><code>writing-mode</code> -> <code>vertical-rl</code>, <code>vertical-lr</code>, <code>sideways-lr</code></li>
            </ul>
            <p>So really, many many possibilities.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-flexbox-1/#flex-lines"><img data-src="img/spec-flexbox.svg" alt="CSS Flexible Box Layout Module Level 1" class="plain spec"></a>
          <h2>All the directions</h2>
          <img data-src="img/combinations.svg" alt="Number of different combinations for flex direction is 64" class="plain" style="max-height:55vh">
          <aside class="notes">
            <p>Also wanted to point out that there are right-to-left languages, so just multiply everything by 2, and voila, 64 potential combinations.</p>
            <p>If you do take the time to try out every combination, don't worry, you won't get 64 different results, because a number of combinations do end up giving you the same end result.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-flexbox-1/#alignment"><img data-src="img/spec-flexbox.svg" alt="CSS Flexible Box Layout Module Level 1" class="plain spec"></a>
          <h2>Aligning with <code>auto</code> margins</h2>
          <div class="livecode livecode-2p">
            <div class="result automargin" style="font-size:75%">
              <div>
                <img class="plain" data-src="img/box.svg" style="width:4em">
              </div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.automargin{
  display: flex;
}

.automargin div {
  border: 1px solid;
  
}</style></div>
          </div>
          <aside class="notes">
            <p>Alright, time to align some boxes. I'm going to start with something that is somewhat direction agnostic. For flex layouts, margins are distributed before alignment properties kick in.</p>
            <p>Any positive free space will be distributed to auto margins in their respective dimensions. So if I set a <code>margin-left: auto</code>, Boxie ends up all the way on the other end of the container. And if I do a <code>margin-top: auto</code>, Boxie gets sent all the way down.</p>
            <p>If we don't specify a dimension, then any free space will be equally distributed on either side of the flex item. And I love showing this example to people who have just started out with CSS and ran into a wall when it comes to centring items.</p>
            <p>Set a <code>margin: auto</code> and boom, 1-line solution to all your centring problems. A small caveat here is that this trick works best if you have only 1 flex child.</p>
          </aside>
        </section>

        <section>
          <h2>Defining “auto” by Elika Etemad (AKA fantasai)</h2>
          <iframe src="https://player.vimeo.com/video/134597090" width="1080" height="607.5" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
          <p><small><a href="https://vimeo.com/134597090">fantasai | Defining &ldquo;auto&rdquo; | CSS Day 2015</a> from <a href="https://vimeo.com/webconferences">Web Conferences Amsterdam</a> on <a href="https://vimeo.com">Vimeo</a>.</small></p>
          <aside class="notes">This is one of my all-time favourite talks by Elika Etemad AKA fantasai, at CSS Day 3 years ago. She works on CSS specifications, and is one of the few people in the world that can answer any question you could possibly have about them. So this talk is definitely worth watching.</aside>
        </section>

        <section>
          <img class="plain" data-src="img/new-layout.svg" alt="Flexbox, Box alignment & Grid">
          <aside class="notes">
            <p>A major evolution in web layout is the ability to position and align content in both the inline and block directions.</p>
            <p>Alignment along the inline axis was generally well supported from the start, especially for languages that were read horizontally from top-to-bottom. Moving text or blocks of content horizontally wasn't too complicated, we had <code>text-align</code>, we could use auto-margins to centre blocks.</p>
            <p>But vertical alignment required a lot of workarounds, a lot of hacks and frustration. Luckily, CSS is not a fixed technology. Changes were introduced, improvements were made, and now we have a suite of tools for two-dimensional alignment and layout.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-flexbox-1/#alignment"><img data-src="img/spec-flexbox.svg" alt="CSS Flexible Box Layout Module Level 1" class="plain spec"></a>
          <h2>Aligning along the main axis</h2>
          <p><code>justify-content</code> helps distribute extra free space left over <strong>after</strong> flexible lengths and auto margins are resolved.</p>
          <div class="livecode livecode-2p">
            <div class="result mainaxis">
              <div class="wrapper" style="font-size:60%">
                <div class="box">1一</div>
                <div class="box">2二</div>
                <div class="box">3三</div>
                <div class="box">4四</div>
                <div class="box">5五</div>
                <div class="box">6六</div>
                <div class="box">7七</div>
                <div class="box">8八</div>
                <div class="box">9九</div>
                <div class="box">10十</div>
                <div class="box">11十一</div>
                <div class="box">12十二</div>
                <div class="box">13十三</div>
                <div class="box">14十四</div>
                <div class="box">15十五</div>
                <div class="box">16十六</div>
                <div class="box">17十七</div>
                <div class="box">18十八</div>
                <div class="box">19十四</div>
                <div class="box">20二十</div>
              </div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.mainaxis .wrapper {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;
}

.mainaxis .box {
  height: 5em;
  width: 5em;
  border: 1px solid;
}</style></div>
          </div>
          <aside class="notes">
            <p>So back to the flex formatting context. For the most part, we are going to have multiple flex items within our flex container. Box alignment gives us 4 properties to align and/or distribute these flex items.</p>
            <p><code>justify-content</code> helps distribute free space left over after flexible lengths and auto margins are resolved. Like this space I have on the right that is not quite 5ems.</p>
            <p>The initial value is <code>flex-start</code> but we can position the content with <code>flex-end</code> and <code>center</code>, as well as distribute the space between flex items, using <code>space-around</code>, <code>space-between</code> and <code>space-evenly</code>.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-flexbox-1/#alignment"><img data-src="img/spec-flexbox.svg" alt="CSS Flexible Box Layout Module Level 1" class="plain spec"></a>
          <img data-src="img/axis-alignment.svg" alt="justify-content values for main axis alignment" class="plain" style="max-height:75vh">
          <aside class="notes">Just some illustrations to show how the values work.</aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-flexbox-1/#alignment"><img data-src="img/spec-flexbox.svg" alt="CSS Flexible Box Layout Module Level 1" class="plain spec"></a>
          <h2>Aligning along the cross axis</h2>
          <p><code>align-items</code> sets the default alignment for all flex items along the cross axis of the flex line. Over-ridable by <code>align-self</code>.</p>
          <div class="livecode livecode-2p">
            <div class="result crossaxis">
              <div class="wrapper" style="font-size:40%">
                <div class="box">1一</div>
                <div class="box">2二</div>
                <div class="box">3三</div>
                <div class="box">4四</div>
                <div class="box">5五</div>
                <div class="box">6六</div>
                <div class="box">7七</div>
                <div class="box">8八</div>
                <div class="box">9九</div>
                <div class="box">10十</div>
                <div class="box">11十一</div>
                <div class="box">12十二</div>
                <div class="box">13十三</div>
                <div class="box">14十四</div>
                <div class="box">15十五</div>
                <div class="box">16十六</div>
                <div class="box">17十七</div>
                <div class="box">18十八</div>
                <div class="box">19十四</div>
                <div class="box">20二十</div>
              </div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.crossaxis .wrapper {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
}

.crossaxis .box:nth-child(2n+1) { 
  padding: 0.5em 1.5em 3em;
  align-self: ;
}
.crossaxis .box { border: 1px solid }
.crossaxis .box:nth-child(2n) { padding: 2.5em; } 
.crossaxis .box:nth-child(3n) { padding: 1.5em; }
.crossaxis .box:nth-child(3n+2) { padding: 3.5em 1em; }</style></div>
          </div>
          <aside class="notes">
            <p>So the next thing is to align along the cross axis. Here we have flex children of various different heights so there is space within the flex line for them to be aligned.</p>
            <p><code>align-items</code> sets the default alignment for all the flex children at once. And the initial value is flex-start, but again, we can do flex-end and center. And we can also stretch out the children to fill up the available space.</p>
            <p>Another value that can be used is <code>baseline</code>, which aligns the baseline for every flex item so all your text lines up rather neatly.</p>
            <p>If we want to tweak the positions of individual flex items, then we'll make use of <code>align-self</code> which does the same thing, but for a single flex item.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-flexbox-1/#alignment"><img data-src="img/spec-flexbox.svg" alt="CSS Flexible Box Layout Module Level 1" class="plain spec"></a>
          <img data-src="img/cross-alignment.svg" alt="align-items values for cross axis alignment" class="plain" style="max-height:75vh">
          <aside class="notes">Another bunch of illustrations to show how things work. I really didn't know what to do about the baseline value, so this it, sorry.</aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-flexbox-1/#alignment"><img data-src="img/spec-flexbox.svg" alt="CSS Flexible Box Layout Module Level 1" class="plain spec"></a>
          <h2>Packing flex lines</h2>
          <p><code>align-content</code> aligns flex lines within the flex container if there is extra space along the <strong>cross-axis</strong>.</p>
          <div class="livecode livecode-2p">
            <div class="result packaxis">
              <div class="wrapper" style="font-size:40%;height:100%">
                <div class="box">1一</div>
                <div class="box">2二</div>
                <div class="box">3三</div>
                <div class="box">4四</div>
                <div class="box">5五</div>
                <div class="box">6六</div>
                <div class="box">7七</div>
                <div class="box">8八</div>
                <div class="box">9九</div>
                <div class="box">10十</div>
                <div class="box">11十一</div>
                <div class="box">12十二</div>
                <div class="box">13十三</div>
                <div class="box">14十四</div>
                <div class="box">15十五</div>
                <div class="box">16十六</div>
                <div class="box">17十七</div>
                <div class="box">18十八</div>
                <div class="box">19十四</div>
                <div class="box">20二十</div>
              </div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.packaxis .wrapper {
  display: flex;
  flex-wrap: wrap;
  align-content: stretch;
}

.packaxis .box {
  height: 5em;
  width: 5em;
  border: 1px solid;
}</style></div>
          </div>
          <aside class="notes">
            <p>This header was lifted directly from the specification, because I couldn't think of anything better.</p>
            <p>If a flex container has more space along the cross axis than necessary to contain all the flex children, the flex lines stretch to fill up all the space. Flex lines, not flex children.</p>
            <p>The property that controls this is <code>align-content</code>. Only multi-line flex containers will ever have free space along the cross-axis for us to do alignment stuff. Flex lines in single-line containers stretch to take up all the space.</p>
            <p>If we don't want the default value of <code>stretch</code>, which sometimes cause unwanted behaviour like in this example, we can <em>pack</em> the flex lines and position them accordingly within the flex container (<code>flex-start</code> | <code>flex-end</code> | <code>center</code>). Or adjust the distribution of the flex lines within the flex container (<code>space-around</code> | <code>space-between</code> | <code>space-evenly</code>).</p>
            <p>If there's one thing to take away from this talk, is that, you can only align stuff if there's extra space available in the container box.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-align-3/#overview"><img data-src="img/spec-grid.svg" alt="CSS Grid Layout Module Level 1" class="plain spec"></a>
          <h2>Grid formatting context</h2>
          <p>Established by a block-level or inline-level <strong>grid</strong> container box</p>
          <div class="l-multiple" style="align-items:end">
            <img data-src="img/flex-mc.svg" alt="No margin collapse" class="fragment plain" style="max-height:25vh">
            <img data-src="img/flex-fc.svg" alt="No floats or clear" class="fragment plain" style="max-height:25vh">
            <img data-src="img/flex-va.svg" alt="No vertical-align" class="fragment plain" style="max-height:25vh">
            <img data-src="img/grid-linealign.svg" alt="Grid lines form containing block" class="fragment plain" style="max-height:40vh">
          </div>
          <aside class="notes">
            <p>I'd be remiss if I gave a talk about box alignment without mentioning how it works for Grid. The layout rules for a grid formatting context are somewhat similar to that of a flex formatting context.</p>
            <ul>
              <li>the grid container's margins also do not collapse with the margins of its children</li>
              <li><code>float</code> and <code>clear</code> don't really do anything to a grid item</li>
              <li>neither does <code>vertical-align</code></li>
              <li>grid lines form the boundaries of each grid items containing block</li>
            </ul>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-grid-1/#grid-concepts"><img data-src="img/spec-grid.svg" alt="CSS Grid Layout Module Level 1" class="plain spec"></a>
          <h2>Grid terminology</h2>
          <img data-src="img/terminology.svg" alt="CSS grid terminology" class="plain" style="max-height:75vh">
          <aside class="notes">And these are the terms used whenever we discuss CSS grid. Grid lines are referred to by their numerical index, which starts at 1 and not 0. You can use a negative index or even name grid lines, if you want to.</aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-align-3/#overview"><img data-src="img/spec-boxalignment.svg" alt="CSS Box Alignment Module Level 3" class="plain spec"></a>
          <h2>Box alignment properties</h2>
          <table style="font-size:70%">
            <tr style="border-bottom:2px solid">
              <th width="19%">Property</th>
              <th width="10%">Axis</th>
              <th>Aligns</th>
              <th width="25%">Applies to</th>
            </tr>
            <tr>
              <td><code>justify-content</code></td>
              <td>main/inline</td>
              <td rowspan="2"><p style="width:65%;display:inline-block">content within element<br>(effectively adjusts padding)</p><img class="plain" style="max-width:7em;vertical-align:top" data-src="img/content.svg" alt="Content diagram"></td>
              <td rowspan="2">block containers, flex containers and grid containers<br></td>
            </tr>
            <tr style="border-bottom:2px solid">
              <td><code>align-content</code></td>
              <td>cross/block</td>
            </tr>
            <tr>
              <td><code>justify-self</code></td>
              <td>inline</td>
              <td rowspan="2"><p style="width:65%;display:inline-block">element within parent<br>(effectively adjusts margins)</p><img class="plain" style="max-width:7em;vertical-align:top" data-src="img/self.svg" alt="Self diagram"></td>
              <td>block-level boxes, absolutely-positioned boxes and grid items<br></td>
            </tr>
            <tr style="border-bottom:2px solid">
              <td><code>align-self</code></td>
              <td>cross/block</td>
              <td>absolutely-positioned boxes, flex items and grid items<br></td>
            </tr>
            <tr>
              <td><code>justify-items</code></td>
              <td>inline</td>
              <td rowspan="2"><p style="width:65%;display:inline-block">items inside box<br>(controls child items)</p><img class="plain" style="max-width:7em;vertical-align:top" data-src="img/items.svg" alt="Items diagram"></td>
              <td>block containers and grid containers<br></td>
            </tr>
            <tr style="border-bottom:2px solid">
              <td><code>align-items</code></td>
              <td>cross/block</td>
              <td>flex-containers and grid-containers<br></td>
            </tr>
          </table>
          <aside class="notes">
            <p>Eventually, the CSS working group decided it made sense to come up with a cohesive and common box alignment model that could be shared across all the different formatting contexts.</p>
            <p>And that's the CSS Box Alignment Module Level 3, which define the 6 properties that control alignment of boxes within other boxes.</p>
          </aside>
        </section>

        <section>
          <div class="l-double">
            <div>
              <h2>Flexbox</h2>
              <img class="plain" style="height:4em;display:block;margin:0 auto 0.5em" data-src="img/flexbox.svg" alt="Flexbox">
              <ul>
                <li><code>align-content</code></li>
                <li><code>justify-content</code></li>
                <li><code>align-items</code></li>
                <li><code>align-self</code></li>
              </ul>
              <p>The <code>justify-items</code>/<code>justify-self</code> properties do <strong>not</strong> apply to flex items</p>
            </div>
            <div>
              <h2>Grid</h2>
              <img class="plain" style="height:4em;display:block;margin:0 auto 0.5em" data-src="img/grid.svg" alt="Grid">
              <ul>
                <li><code>align-content</code></li>
                <li><code>justify-content</code></li>
                <li><code>align-items</code></li>
                <li><code>align-self</code></li>
                <li><code>justify-items</code></li>
                <li><code>justify-self</code></li>
              </ul>
            </div>
          </div>
          <aside class="notes">
            <p>When using Grid, all 6 properties are relevant, however, when using Flexbox, self alignment along the main axis, is not applicable. <code>justify-self</code> and <code>justify-items</code> have no effect in a flex formatting context, because there is more than 1 item in the main axis.</p>
            <p>In the future, these box alignment properties will be applicable to block formatting contexts as well, making alignment a much more straight-forward process than what we have now.</p>
            <p>How many people have trouble remembering which value affects which axis? Justify versus align? Is there anyone here who has <strong>not</strong> used Microsoft Word or any word processing software before?</p>
          </aside>
        </section>

        <section>
          <div class="l-double" style="opacity:0.2">
            <div>
              <h2>Flexbox</h2>
              <img class="plain" style="height:4em;display:block;margin:0 auto 0.5em" data-src="img/flexbox.svg" alt="Flexbox">
              <ul>
                <li><code>align-content</code></li>
                <li><code>justify-content</code></li>
                <li><code>align-items</code></li>
                <li><code>align-self</code></li>
              </ul>
              <p>The <code>justify-items</code>/<code>justify-self</code> properties do <strong>not</strong> apply to flex items</p>
            </div>
            <div>
              <h2>Grid</h2>
              <img class="plain" style="height:4em;display:block;margin:0 auto 0.5em" data-src="img/grid.svg" alt="Grid">
              <ul>
                <li><code>align-content</code></li>
                <li><code>justify-content</code></li>
                <li><code>align-items</code></li>
                <li><code>align-self</code></li>
                <li><code>justify-items</code></li>
                <li><code>justify-self</code></li>
              </ul>
            </div>
          </div>
          <img class="plain" data-src="img/txt-align-icons.svg" alt="Text align icons" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)">
          <p style="position:absolute;top:62.5%;left:50%;transform:translate(-50%,0%)">Justify</p>
          <aside class="notes">If you used such software before, I will make the bold assumption that you have seen these 4 lovely icons before, and you know they are used to justify text. That is, to move it along the inline axis. Since there are only 2 values for 2 axes, if justify is along this direction, then align must be for the other direction.</aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-align-3/#overview"><img data-src="img/spec-boxalignment.svg" alt="CSS Box Alignment Module Level 3" class="plain spec"></a>
          <table style="font-size:75%">
            <tr>
              <th>Values</th>
              <th><code>justify-content</code></th>
              <th><code>align-content</code></th>
            </tr>
            <tr>
              <td><code>center</code></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/jc-center.png" alt="justify-content:center"></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/ac-center.png" alt="align-content:center"></td>
            </tr>
            <tr>
              <td><code>start</code></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/jc-start.png" alt="justify-content:start"></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/ac-start.png" alt="align-content:start"></td>
            </tr>
            <tr>
              <td><code>end</code></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/jc-end.png" alt="justify-content:end"></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/ac-end.png" alt="align-content:end"></td>
            </tr>
            <tr>
              <td><code>space-around</code></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/jc-sa.png" alt="justify-content:space-around"></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/ac-sa.png" alt="align-content:space-around"></td>
            </tr>
            <tr>
              <td><code>space-between</code></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/jc-sb.png" alt="justify-content:space-between"></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/ac-sb.png" alt="align-content:space-between"></td>
            </tr>
            <tr>
              <td><code>space-evenly</code></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/jc-se.png" alt="justify-content:space-evenly"></td>
              <td style="text-align:center"><img class="plain" style="max-height:2.5em;margin:0" data-src="img/ac-se.png" alt="align-content:space-evenly"></td>
            </tr>
          </table>
          <aside class="notes">The <code>justify-content</code> and <code>align-content</code> properties are known as <strong>content-distribution properties</strong>. And we've already seen them in action in a flex formatting context. This table is a summary of the values we've covered thus far for content distribution.</aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-align-3/#overview"><img data-src="img/spec-boxalignment.svg" alt="CSS Box Alignment Module Level 3" class="plain spec"></a>
          <h2><code>justify/align-content</code></h2>
          <p>content-distribution properties</p>
          <div class="livecode livecode-2p">
            <div class="result content" style="font-size:75%">
              <div style="border:1px solid" class="content_itemA">A</div>
              <div style="border:1px solid" class="content_itemB">B</div>
              <div style="border:1px solid" class="content_itemC">C</div>
              <div style="border:1px solid" class="content_itemD">D</div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.content {
  justify-content: normal;
  align-content: normal;
  
  display: grid;
  grid-template-columns: repeat(3, 25%);
  grid-template-rows: repeat(3, 20%);
  grid-gap: 1em;
  grid-template-areas: 
    "a b b"
    "a b b"
    "c c d";
}

.content_itemA { grid-area: a }
.content_itemB { grid-area: b }
.content_itemC { grid-area: c }
.content_itemD { grid-area: d }</style></div>
          </div>
          <aside class="notes">
            <p>The values that we covered for flexbox are applicable for grid as well, except that instead of <code>flex-start</code>, we'd use <code>start</code> instead.</p>
            <p>If you do end up using any flex-prefixed values in a non-flex formatting context, the browser will resolve away the prefix. Let's just verify that works. You're free to use the <code>start</code> and <code>end</code> for flexbox though.</p>
            <p>And now that we've sorted out the align versus justify situation, I want to bring your attention to a short-hand for setting both values in a single declaration. This short-hand uses the word “place”. So in this example, it will be <code>place-content</code>.</p>
            <p>The first value sets <code>align-content</code>, while the second sets <code>justify-content</code>. If you only enter a single value, then <code>justify-content</code> will default to the same value as <code>align-content</code>.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-align-3/#overview"><img data-src="img/spec-boxalignment.svg" alt="CSS Box Alignment Module Level 3" class="plain spec"></a>
          <h2><code>justify/align-self</code></h2>
          <p>self-alignment properties</p>
          <div class="livecode livecode-2p">
            <div class="result self" style="font-size:75%">
              <div style="border:1px solid;font-size:2em" class="self_itemA">A</div>
              <div style="border:1px solid;padding:2em" class="self_itemB">B</div>
              <div style="border:1px solid;font-size:1.5em;padding:0.5em" class="self_itemC">C</div>
              <div style="border:1px solid" class="self_itemD">D</div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.self_itemA {
  grid-area: a;
}

.self_itemB {
  grid-area: b;
  //align-self: start;
  justify-self: start;
}

.self_itemC {
  grid-area: c;
  //align-self: end;
  justify-self: end;
}

.self_itemD {
  grid-area: d;
  align-self: center;
  //justify-self: center;
}

.self {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-gap: 1em;
  grid-auto-rows: calc(25% - 1em);
  grid-template-areas: 
    "a a b b"
    "a a b b"
    "c c d d"
    "c c d d";
}</style></div>
          </div>
          <aside class="notes">
            <p>The <code>justify-self</code> and <code>align-self</code> properties are known as <strong>self-alignment properties</strong>.
            <p>These properties allow us to control how the content of each grid item is aligned within the grid area it's been allocated to. The default state is <code>stretch</code>, where the content stretches to fill the entire grid area.</p>
            <p>We can adjust the alignment of content within the grid item with <code>start</code>, <code>center</code> and <code>end</code>. Once we apply any of these values, the grid item shrinks to fit its contents along the respective axis of alignment.</p>
            <p>The <code>place-self</code> short-hand is also available here.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-align-3/#overview"><img data-src="img/spec-boxalignment.svg" alt="CSS Box Alignment Module Level 3" class="plain spec"></a>
          <h2><code>justify/align-items</code></h2>
          <p>defaults for justify/align-self</p>
          <div class="livecode livecode-2p">
            <div class="result items" style="font-size:75%">
              <div style="border:1px solid;font-size:2em" class="items_itemA">A</div>
              <div style="border:1px solid;padding-top:2em" class="items_itemB">B</div>
              <div style="border:1px solid;font-size:1.5em" class="items_itemC">C</div>
              <div style="border:1px solid" class="items_itemD">D</div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.items {
  justify-items: normal;
  align-items: normal;

  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-gap: 1em;
  grid-auto-rows: calc(25% - 1em);
  grid-template-areas: 
    "a a b b"
    "a a b b"
    "c c d d"
    "c c d d";
}

.items_itemA {
  grid-area: a;
}

.items_itemB {
  grid-area: b;
}

.items_itemC {
  grid-area: c;
}

.items_itemD {
  grid-area: d;
}</style></div>
          </div>
          <aside class="notes">
            <p>Finally, we have the <code>align-items</code> and <code>justify-items</code> properties, which set the default <code>align-self</code> and <code>justify-self</code> behaviour of all the items within the grid.</p>
            <p>Similar to flexbox, except that <code>justify-items</code> does not apply to flexbox. And here you can also use the <code>baseline</code> value to make the text within your grid items to line up neatly. The <code>place-items</code> property is available, if you'd very much prefer a single-line declaration.</p>
          </aside>
        </section>

        <section>
          <a href="https://www.w3.org/TR/css-align-3/#alignment-values"><img data-src="img/spec-boxalignment.svg" alt="CSS Box Alignment Module Level 3" class="plain spec"></a>
          <h2>Overflow alignment keywords</h2>
          <div class="livecode livecode-2p">
            <div class="result overflow" style="font-size:75%">
              <div style="border:1px solid" class="overflow_itemA">A</div>
              <div style="border:1px solid" class="overflow_itemB">B</div>
              <div style="border:1px solid" class="overflow_itemC">C</div>
              <div style="border:1px solid" class="overflow_itemD">D</div>
            </div>
            <div class="code"><style class="code-editor" contenteditable="true">.overflow {
  justify-content: normal;
  align-content: end;
  
  display: grid;
  grid-template-columns: repeat(3, 25%);
  grid-template-rows: repeat(3, 35%);
  grid-gap: 1em;
  grid-template-areas: 
    "a b b"
    "a b b"
    "c c d";
}

.overflow_itemA { grid-area: a }
.overflow_itemB { grid-area: b }
.overflow_itemC { grid-area: c }
.overflow_itemD { grid-area: d }</style></div>
          </div>
          <aside class="notes">
            <p>Alignment keywords, or the values that we use in these various alignment properties, can be classified into 4 categories. We've covered distributed alignment, touched on baseline alignment, as well as gone through positional alignment.</p>
            <p>There are also keywords for managing overflow. Let me explain. If the contents within a container are larger than the container itself, overflow occurs. That's when we get scrollbars, depending on the value of the overflow property.</p>
            <p>But there might be instances where, an alignment mode sends part of the box out past the viewport's start edge, where you can't even scroll to get to it, like this example right here.</p>
            <p>To exercise some semblance of control over such behaviour, we can make use of the <code>safe</code> and <code>unsafe</code> keywords. So if I set the <code>safe</code> keyword here, it will override the alignment mode and make it behave like <code>start</code> in an overflow situation. Using <code>unsafe</code> means the browser will respect the specified alignment mode regardless.</p>
          </aside>
        </section>

        <section>
          <div class="l-double" style="justify-items:center">
            <img class="plain" data-src="img/moholy.jpg" alt="Page 126 of Malerei, Fotografie, Film by Moholy-Nagy" style="max-height:75vh"> 
            <img class="plain fragment " data-src="img/moholy2.jpg" alt="Recreation of page 126 of Malerei, Fotografie, Film with grid and flexbox" style="max-height:75vh">
          </div>
          <p><small>Original image from <a href="http://bibliothequekandinsky.centrepompidou.fr/imagesbk/RLPF727/M5050_X0031_LIV_RLPF0727.pdf">Moholy-Nagy, Malerei, Fotografie, Film</a></small></p>
          <aside class="notes">
            <p>With all these additional tools we now have in our CSS toolbox, the standard of graphic design we can now achieve on the web has vastly improved. I'll attempt to back up this claim with an example. This is a page from László Moholy-Nagy's book, Malerei, Fotografie, Film.</p>
            <p>When I first saw this poster I thought to myself, this looks really grid-able. It's a striking design with bold black borders, and content aligned in different configurations. And here's where all the alignment properties that I covered at length come in really handy.</p>
          </aside>
        </section>

        <section>
          <h2>Bauhaus in the browser</h2>
          <div class="livecode livecode-2p">
            <div>
              <p>Featuring...</p>
              <ul style="list-style-position: inside">
                <li style="margin-left:1em">Grid</li>
                <li style="margin-left:1em">Flexbox</li>
                <li style="margin-left:1em">Writing mode</li>
                <li style="margin-left:1em">Transforms</li>
                <li style="margin-left:1em">Box alignment</li>
              </ul>
              <p><small><a href="https://codepen.io/huijing/pen/PpqomV">https://codepen.io/huijing/pen/PpqomV</a> | <a href="https://www.chenhuijing.com/demos/bauhaus/">Full page demo</a></small></p>
            </div>
            <pre style="max-height:60vh"><code>.grid {
  display: grid;
  grid-template-columns: 30% 9% 9% 9% 9% 9%;
  justify-content: center;
}

.grid__item:nth-child(1) {
  grid-column: span 3;
  justify-self: end;
  border-right: 1em solid;
  padding: 1em;
  text-align: justify;
  text-align-last: justify;

  display: flex;
  justify-content: flex-end;
  align-items: center;

  .content {
    max-width: 12em;
    letter-spacing: 1px;
  }
  
  p:last-of-type {
    margin-bottom: 1em;
  }
}

.grid__item:nth-child(2) {
  grid-column: 4 / span 3;
  align-self: end;
  font-size: 200%;
  padding: 0.25em;
}

.grid__item:nth-child(3) {
  grid-column: 1 / span 3;
  border-top: 1em solid;
  border-bottom: 1em solid;
  padding: 1em 2em;
  letter-spacing: 1px;
  text-align: justify;

  p:first-child {
    margin-bottom: 1em;
  }
}

.grid__item:nth-child(4) {
  grid-column: 4 / span 3;
  border-top: 1em solid;
  border-bottom: 1em solid;

  display: flex;
  align-items: center;
  justify-content: center;
}

.grid__item:nth-child(5) {
  grid-row: 3 / 5;
  border-right: 1em solid;
  padding: 1em;

  display: flex;
  align-items: flex-start;
  justify-content: flex-end;

  img {
    width: 100%;
    max-width: 20em;
  }
}

.grid__item:nth-child(6) {
  writing-mode: vertical-rl;
  border-right: 1em solid;

  display: flex;
  justify-content: flex-end;
  align-items: center;
}

.grid__item:nth-child(7) {
  padding: 0.5em 0.25em;
  font-size: 85%;
  border-right: 1em solid;
}

.grid__item:nth-child(8) {
  border-left: 0.5em solid;

  display: flex;
  justify-content: center;
  align-items: center;
}

.grid__item:nth-child(9) {
  letter-spacing: 1px;
  padding: 0.5em 0.25em;
  border-right: 1em solid;
}

.grid__item:nth-child(10) {
  grid-row: 3 / 5;
  grid-column: 6;
  justify-self: center;
  align-self: center;
}

.grid__item:nth-child(11) {
  grid-column: 2 / 4;
  letter-spacing: 1px;
  padding: 0.5em;
  border-top: 1em solid;
  border-right: 1em solid;
}

.grid__item:nth-child(12) {
  border-top: 1em solid;
  border-right: 1em solid;
}

.grid__item:nth-child(13) {
  border-top: 1em solid;
  border-right: 1em solid;
}</code></pre>
          </div>
          <aside class="notes">
            <p>The code shown here is abridged to show mainly the layout code, but even the gear and arrow can be made with pure CSS, with some help from the <code>box-shadow</code> property. At first glance, it might be tempting to reach for the self alignment properties, apply them to the grid items and call it a day.</p>
            <p>However, that approach will not work for in this case. In order to align the internal content of each grid child without disrupting the rendering of those thick black borders, we'll need to make each grid child a flex parent.</p>
          </aside>
        </section>

        <section>
          <div class="l-double" style="justify-items:stretch">
            <figure>
              <img class="plain" style="height:8em" data-src="img/fit.svg" alt="Self-alignment properties">
              <figcaption>These are not the borders you are looking for</figcaption>
            </figure>
            <figure class="fragment">
              <img class="plain" style="height:8em" data-src="img/flex.svg" alt="Display flex on grid items">
              <figcaption>That's more like it</figcaption>
            </figure>
          </div>
          <aside class="notes">
            <p>Because by default, the value of a grid item's alignment is stretch, where it fills up the entire space of the grid cell. Once an alignment is applied to the grid item's contents, it will shrink to fit its content.</p>
            <p>Making each grid item a flex container allows us to use box alignment properties to adjust the position of the grid item's content while keeping the borders at the edge of the grid cell.</p>
            <p>The very first time I gave this talk, I wasn't really sure how much I could talk about box alignment, but that was because I hadn't really dug into what box alignment was all about. The more I dug, the more I realised, hang on, I'd been using all these techniques without really understanding how they worked.</p>
            <p>So I don't know about you, but this has been a great experience for me. But I do hope that you find some of the things I covered useful to you and that you enjoyed this talk as much as I enjoyed giving it.</p>
          </aside>
        </section>

        <section>
          <h2>References and resources</h2>
          <ul style="column-count:2;font-size:80%">
            <li><a href="https://hacks.mozilla.org/2017/08/inside-a-super-fast-css-engine-quantum-css-aka-stylo/">Inside a super fast CSS engine: Quantum CSS (aka Stylo)</a></li>
            <li><a href="https://www.w3.org/TR/CSS22/visuren.html">CSS2.2 Visual formatting model</a></li>
            <li><a href="https://www.w3.org/TR/css-display-3/">CSS Display Module Level 3</a></li>
            <li><a href="https://www.w3.org/TR/CSS22/tables.html">CSS2.2 Tables</a></li>
            <li><a href="https://www.w3.org/TR/css-align-3/">CSS Box Alignment Module Level 3</a></li>
            <li><a href="https://www.w3.org/TR/css-writing-modes-3/">CSS Writing Modes Level 3</a></li>
            <li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1038294">Bug 1038294 - [css-display] Implement the multi-keyword syntax for the 'display' property</a></li>
            <li><a href="http://book.mixu.net/css/1-positioning.html">Learn CSS the pedantic way</a></li>
            <li><a href="http://christopheraue.net/design/vertical-align">Vertical-Align: All You Need To Know</a></li>
            <li><a href="https://www.smashingmagazine.com/2017/12/understanding-css-layout-block-formatting-context/">Understanding CSS Layout And The Block Formatting Context</a></li>
            <li><a href="https://www.smashingmagazine.com/2016/11/css-grids-flexbox-box-alignment-new-layout-standard/">The New Layout Standard For The Web: CSS Grid, Flexbox And Box Alignment</a></li>
            <li><a href="https://medium.com/@patrickbrosset/demystifying-css-alignment-2d3ea7a02a36">Demystifying CSS alignment</a></li>
            <li><a href="https://hacks.mozilla.org/2017/06/new-css-grid-layout-panel-in-firefox-nightly/">Powerful New Additions to the CSS Grid Inspector in Firefox Nightly</a></li>
            <li><a href="https://www.smashingmagazine.com/2018/10/flexbox-use-cases/">Use cases for Flexbox</a></li>
          </ul>
          <aside class="notes">Here's a list of links and resources.</aside>
        </section>

        <section style="text-align:left">
          <h1>Thank you!</h1>
          <p><img class="j-icon plain" data-src="img/home.png" alt="Website"><a href="https://www.chenhuijing.com" style="display:inline-block;vertical-align:middle">https://www.chenhuijing.com</a></p>
          <p><img class="j-icon plain" data-src="img/twitter.png" alt="Twitter"><a href="https://twitter.com/hj_chen" style="display:inline-block;vertical-align:middle">@hj_chen</a></p>
          <p><img class="j-icon plain" data-src="img/medium.png" alt="Medium"><a href="https://medium.com/@hj_chen" style="display:inline-block;vertical-align:middle">@hj_chen</a></p>
          <p><img class="j-icon plain" data-src="img/codepen.png" alt="Codepen"><a href="http://codepen.io/huijing/" style="display:inline-block;vertical-align:middle">@huijing</a></p>
          <p style="text-align:right"><small>Font used is <a href="http://www.losttype.com/font/?name=missiongothic">Mission Gothic</a>, by <a href="https://ohnotype.co/">James T. Edmondson</a> and <a href="http://www.trevorbaum.com/">Trevor Baum</a></small></p>
        </section>
      </div>

      <footer style="position:absolute;width:calc(100% - 1em);bottom:0;font-size:40%;z-index:1;display:flex;justify-content:space-between;padding:0.5em"><span>https://huijing.github.io/slides/45-btconf-2018</span><span style="text-align:right">@hj_chen</span></footer>

    </div>
    <script src="https://player.vimeo.com/api/player.js"></script>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script src="lib/js/caniuse-embed.min.js"></script>
    <script src="lib/js/player.js"></script>
    <script async src="lib/js/ei.js"></script>
    <script async src="lib/js/widgets.js" charset="utf-8"></script>
    <script>
    Reveal.initialize({
      dependencies: [
        { src: 'plugin/markdown/marked.js' },
        { src: 'plugin/markdown/markdown.js' },
        { src: 'plugin/notes/notes.js', async: true },
        { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
      ]
    });
    </script>
  </body>

</html>
